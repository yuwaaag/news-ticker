<!DOCTYPE html>
<html lang="hi">
<head>
    <meta charset="UTF-8">
    <style>
        body { margin: 0; padding: 0; overflow: hidden; background: transparent; font-family: 'Arial', sans-serif; }
        #main-container { width: 1920px; height: 80px; display: flex; align-items: center; background: rgba(0, 0, 0, 0.95); border-top: 4px solid #ffcc00; }
        #location-box { background: #ffcc00; color: #000; padding: 0 20px; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; font-weight: bold; min-width: 220px; z-index: 10; }
        #city-name { font-size: 24px; }
        #weather-info { font-size: 18px; color: #cc0000; }
        #ticker-window { flex-grow: 1; overflow: hidden; white-space: nowrap; background: linear-gradient(90deg, #b30000 0%, #ff0000 100%); height: 100%; display: flex; align-items: center; }
        .ticker-text { display: inline-block; padding-left: 100%; animation: scroll 65s linear infinite; font-size: 32px; color: white; font-weight: bold; }
        #time-box { background: #ffffff; color: #000; padding: 0 25px; height: 100%; display: flex; flex-direction: column; justify-content: center; align-items: center; min-width: 180px; border-left: 4px solid #ffcc00; }
        #digital-clock { font-size: 28px; font-weight: bold; }
        @keyframes scroll { 0% { transform: translateX(0); } 100% { transform: translateX(-100%); } }
        .news-item { display: inline-block; padding-right: 100px; }
    </style>
</head>
<body onclick="startCleanVoice()">

    <div id="main-container">
        <div id="location-box">
            <div id="city-name">LUCKNOW</div>
            <div id="weather-info">--¬∞C</div>
        </div>
        <div id="ticker-window">
            <div class="ticker-text" id="news-content">‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã ‡§∞‡§π‡•Ä ‡§π‡•à‡§Ç... ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∂‡•Å‡§∞‡•Ç ‡§ï‡§∞‡§®‡•á ‡§ï‡•á ‡§≤‡§ø‡§è ‡§Ø‡§π‡§æ‡§Å ‡§ï‡•ç‡§≤‡§ø‡§ï ‡§ï‡§∞‡•á‡§Ç (Interact)</div>
        </div>
        <div id="time-box"><div id="digital-clock">00:00:00</div></div>
    </div>

    <script>
        let newsList = ["‡§§‡§æ‡§ú‡§º‡§æ ‡§ñ‡§¨‡§∞‡•ã‡§Ç ‡§ï‡•á ‡§≤‡§ø‡§è ‡§ö‡•à‡§®‡§≤ ‡§ï‡•ã ‡§∏‡§¨‡•ç‡§∏‡§ï‡•ç‡§∞‡§æ‡§á‡§¨ ‡§ï‡§∞‡•á‡§Ç", "‡§Ü‡§ú ‡§ï‡•Ä ‡§¨‡§°‡§º‡•Ä ‡§ñ‡§¨‡§∞‡•á‡§Ç ‡§Ø‡§π‡§æ‡§Å ‡§¶‡•á‡§ñ‡•á‡§Ç"];
        let msg = new SpeechSynthesisUtterance();

        async function fetchNews() {
            try {
                const res = await fetch(`https://api.rss2json.com/v1/api.json?rss_url=https://rss.nytimes.com/services/xml/rss/nyt/World.xml`);
                const data = await res.json();
                if (data.status === 'ok') {
                    newsList = data.items.map(item => item.title);
                    document.getElementById('news-content').innerHTML = newsList.map(t => `<span class="news-item">${t}</span>`).join("");
                }
            } catch (e) { console.log("News Load Error"); }
        }

        function startCleanVoice() {
            let index = 0;

            function speak() {
                if (index >= newsList.length) index = 0;

                // Step 1: Translate to Hindi
                fetch(`https://translate.googleapis.com/translate_a/single?client=gtx&sl=en&tl=hi&dt=t&q=${encodeURI(newsList[index])}`)
                    .then(r => r.json())
                    .then(d => {
                        let hindiText = d[0][0][0];
                        
                        // Step 2: Clear Voice Settings
                        window.speechSynthesis.cancel(); // ‡§™‡•Å‡§∞‡§æ‡§®‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§∞‡•ã‡§ï‡•ã
                        msg.text = hindiText;
                        msg.lang = 'hi-IN';
                        msg.rate = 0.8; // ‡§•‡•ã‡§°‡§º‡•Ä ‡§ß‡•Ä‡§Æ‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º (‡§®‡•ç‡§Ø‡•Ç‡§ú‡§º ‡§ú‡•à‡§∏‡•Ä)
                        msg.pitch = 1;

                        // ‡§Ö‡§ö‡•ç‡§õ‡•Ä ‡§Ü‡§µ‡§æ‡§ú‡§º ‡§¢‡•Ç‡§Å‡§¢‡§®‡§æ (Forcing Hindi Voice)
                        let voices = window.speechSynthesis.getVoices();
                        let hindiVoice = voices.find(v => v.lang.includes('hi'));
                        if (hindiVoice) msg.voice = hindiVoice;

                        msg.onend = () => { index++; setTimeout(speak, 1500); };
                        window.speechSynthesis.speak(msg);
                    });
            }
            speak();
        }

        async function updateWeather() {
            const res = await fetch(`https://api.open-meteo.com/v1/forecast?latitude=26.84&longitude=80.94&current_weather=true`);
            const data = await res.json();
            document.getElementById('weather-info').innerText = `üå°Ô∏è ${Math.round(data.current_weather.temperature)}¬∞C`;
        }

        function updateClock() {
            document.getElementById('digital-clock').innerText = new Date().toLocaleTimeString();
        }

        window.speechSynthesis.onvoiceschanged = () => { /* ‡§Ü‡§µ‡§æ‡§ú‡§º‡•á‡§Ç ‡§≤‡•ã‡§° ‡§π‡•ã‡§®‡•á ‡§¶‡•á‡§Ç */ };
        setInterval(updateClock, 1000);
        updateWeather();
        fetchNews();
    </script>
</body>
</html>
